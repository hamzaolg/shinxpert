import streamlit as st
from PIL import Image
import base64
import io

st.set_page_config(page_title="ShinXpert App", layout="centered")

# Sidebar
st.sidebar.title("ShinXpert")
st.sidebar.markdown("Smart Shin Guard Dashboard")
if "started" not in st.session_state:
    st.session_state.started = False

if not st.session_state.started:
    st.title("üëü Welcome to ShinXpert")
    st.markdown("Track player performance in real-time.")
    if st.button("Start Dashboard"):
        st.session_state.started = True
    st.stop()

# Donn√©es joueurs
players_data = [{'number': 7, 'time': '45 min', 'injury': '3%', 'speed': '25 km/h', 'heart': '72 bpm', 'calories': '310 kcal', 'passes': '28', 'shots': '4'}, {'number': 10, 'time': '60 min', 'injury': '5%', 'speed': '27 km/h', 'heart': '80 bpm', 'calories': '450 kcal', 'passes': '35', 'shots': '5'}, {'number': 23, 'time': '30 min', 'injury': '1%', 'speed': '20 km/h', 'heart': '70 bpm', 'calories': '220 kcal', 'passes': '17', 'shots': '2'}]

# Recherche par num√©ro
search_input = st.text_input("Enter player number", "")
player = players_data[0]

if search_input:
    try:
        num = int(search_input)
        match = [p for p in players_data if p["number"] == num]
        if match:
            player = match[0]
        else:
            st.warning("Player not found. Showing default.")
    except:
        st.warning("Invalid number")

st.markdown(f"### Player #{player['number']} Stats")

# Bloc affichage styl√©
card_html = f"""
<style>
.card {
  background-color: #f9f9f9;
  border-radius: 15px;
  padding: 20px;
  color: #000;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  font-size: 17px;
  line-height: 2;
}
.card span {
  font-weight: bold;
  color: #111;
}
</style>

<div class="card">
üïí <span>{player['time']}</span> Time played  &nbsp;|&nbsp;
‚öïÔ∏è <span>{player['injury']}</span> Injury risk  &nbsp;|&nbsp;
‚ö° <span>{player['speed']}</span> Speed<br>
üíì <span>{player['heart']}</span> Heart rate  &nbsp;|&nbsp;
üî• <span>{player['calories']}</span> Calories burned  &nbsp;|&nbsp;
üéØ <span>{player['passes']}</span> Passes  &nbsp;|&nbsp;
ü•Ö <span>{player['shots']}</span> Shots on target
</div>
"""
st.markdown(card_html, unsafe_allow_html=True)

# Heatmap
heatmap_base64 = """iVBORw0KGgoAAAANSUhEUgAAA5wAAAOcCAYAAAAisr7RAAAAOXRFWHRTb2Z0d2FyZQBNYXRwbG90bGliIHZlcnNpb24zLjYuMywgaHR0cHM6Ly9tYXRwbG90bGliLm9yZy/P9b71AAAACXBIWXMAAB7CAAAewgFu0HU+AAAXOUlEQVR4nO3ZscuvBRnH4d+vXlsOEQTnDA3aIg01RFBYpItWUy7hIBFWuEY4lNkiBcXRiCCaKiRRcHDLliSKOBCVLaFCZDUUBEmECe8SwdNf8Xlv6L6uv+A7PPA8n+c+f/l0Ok5cmSe+O71gob9ND1jmoekBy7x9esA+T90xvWCXzx8/mp6wzyc+O71glVsvTi/Y5e7jtekJ67xlegAAAAD/nwQnAAAACcEJAABAQnACAACQEJwAAAAkBCcAAAAJwQkAAEBCcAIAAJAQnAAAACQEJwAAAAnBCQAAQEJwAgAAkBCcAAAAJAQnAAAACcEJAABAQnACAACQEJwAAAAkBCcAAAAJwQkAAEBCcAIAAJAQnAAAACQEJwAAAAnBCQAAQEJwAgAAkBCcAAAAJAQnAAAACcEJAABAQnACAACQEJwAAAAkBCcAAAAJwQkAAEBCcAIAAJAQnAAAACQEJwAAAAnBCQAAQEJwAgAAkBCcAAAAJAQnAAAACcEJAABAQnACAACQEJwAAAAkBCcAAAAJwQkAAEBCcAIAAJAQnAAAACQEJwAAAAnBCQAAQEJwAgAAkBCcAAAAJAQnAAAACcEJAABAQnACAACQEJwAAAAkBCcAAAAJwQkAAEBCcAIAAJAQnAAAACQEJwAAAAnBCQAAQEJwAgAAkBCcAAAAJAQnAAAACcEJAABAQnACAACQEJwAAAAkBCcAAAAJwQkAAEBCcAIAAJAQnAAAACQEJwAAAAnBCQAAQEJwAgAAkBCcAAAAJAQnAAAACcEJAABAQnACAACQEJwAAAAkBCcAAAAJwQkAAEBCcAIAAJAQnAAAACQEJwAAAAnBCQAAQEJwAgAAkBCcAAAAJAQnAAAACcEJAABAQnACAACQEJwAAAAkBCcAAAAJwQkAAEDi4onjS9MbVnn4/K3pCev8YHrAMm94xK/UPdMDFnr5d9MLtnl1esA+H5kesMsHXpxesMut853TE9Zx4QQAACAhOAEAAEgITgAAABKCEwAAgITgBAAAICE4AQAASAhOAAAAEoITAACAhOAEAAAgITgBAABICE4AAAASghMAAICE4AQAACAhOAEAAEgITgAAABKCEwAAgITgBAAAICE4AQAASAhOAAAAEoITAACAhOAEAAAgITgBAABICE4AAAASghMAAICE4AQAACAhOAEAAEgITgAAABKCEwAAgITgBAAAICE4AQAASAhOAAAAEoITAACAhOAEAAAgITgBAABICE4AAAASghMAAICE4AQAACAhOAEAAEgITgAAABKCEwAAgITgBAAAICE4AQAASAhOAAAAEoITAACAhOAEAAAgITgBAABICE4AAAASghMAAICE4AQAACAhOAEAAEgITgAAABKCEwAAgITgBAAAICE4AQAASAhOAAAAEoITAACAhOAEAAAgITgBAABICE4AAAASghMAAICE4AQAACAhOAEAAEgITgAAABKCEwAAgITgBAAAICE4AQAASAhOAAAAEoITAACAhOAEAAAgITgBAABICE4AAAASghMAAICE4AQAACAhOAEAAEgITgAAABKCEwAAgITgBAAAICE4AQAASAhOAAAAEoITAACAhOAEAAAgITgBAABICE4AAAASghMAAICE4AQAACAhOAEAAEgITgAAABKCEwAAgITgBAAAICE4AQAASAhOAAAAEoITAACAxPnm6XRMj9jk0eemF+zz+oPTC3a58ePpBbt87f7pBfs8/rPpBcv8YnrAPu/9xvSCXV798PSCZf4yPWAfF04AAAASghMAAICE4AQAACAhOAEAAEgITgAAABKCEwAAgITgBAAAICE4AQAASAhOAAAAEoITAACAhOAEAAAgITgBAABICE4AAAASghMAAICE4AQAACAhOAEAAEgITgAAABKCEwAAgITgBAAAICE4AQAASAhOAAAAEoITAACAhOAEAAAgITgBAABICE4AAAASghMAAICE4AQAACAhOAEAAEgITgAAABKCEwAAgITgBAAAICE4AQAASAhOAAAAEoITAACAhOAEAAAgITgBAABICE4AAAASghMAAICE4AQAACAhOAEAAEgITgAAABKCEwAAgITgBAAAICE4AQAASAhOAAAAEoITAACAhOAEAAAgITgBAABICE4AAAASghMAAICE4AQAACAhOAEAAEgITgAAABKCEwAAgITgBAAAICE4AQAASAhOAAAAEoITAACAhOAEAAAgITgBAABICE4AAAASghMAAICE4AQAACAhOAEAAEgITgAAABKCEwAAgITgBAAAICE4AQAASAhOAAAAEoITAACAhOAEAAAgITgBAABICE4AAAASghMAAICE4AQAACAhOAEAAEgITgAAABKCEwAAgITgBAAAICE4AQAASAhOAAAAEoITAACAhOAEAAAgITgBAABICE4AAAASghMAAICE4AQAACAhOAEAAEgITgAAABKCEwAAgITgBAAAIHHx6PHS9IZlvj49YJ0b735hesIud31oesEqt51+Oz1hn3vfNb1gl4//fXrBOm9MD9jmo9MDlvnV96YXrOPCCQAAQEJwAgAAkBCcAAAAJAQnAAAACcEJAABAQnACAACQEJwAAAAkBCcAAAAJwQkAAEBCcAIAAJAQnAAAACQEJwAAAAnBCQAAQEJwAgAAkBCcAAAAJAQnAAAACcEJAABAQnACAACQEJwAAAAkBCcAAAAJwQkAAEBCcAIAAJAQnAAAACQEJwAAAAnBCQAAQEJwAgAAkBCcAAAAJAQnAAAACcEJAABAQnACAACQEJwAAAAkBCcAAAAJwQkAAEBCcAIAAJAQnAAAACQEJwAAAAnBCQAAQEJwAgAAkBCcAAAAJAQnAAAACcEJAABAQnACAACQEJwAAAAkBCcAAAAJwQkAAEBCcAIAAJAQnAAAACQEJwAAAAnBCQAAQEJwAgAAkBCcAAAAJAQnAAAACcEJAABAQnACAACQEJwAAAAkBCcAAAAJwQkAAEBCcAIAAJAQnAAAACQEJwAAAAnBCQAAQEJwAgAAkBCcAAAAJAQnAAAACcEJAABAQnACAACQEJwAAAAkBCcAAAAJwQkAAEBCcAIAAJAQnAAAACQEJwAAAAnBCQAAQEJwAgAAkBCcAAAAJAQnAAAACcEJAABAQnACAACQEJwAAAAkBCcAAAAJwQkAAEBCcAIAAJAQnAAAACQEJwAAAAnBCQAAQEJwAgAAkBCcAAAAJAQnAAAACcEJAABAQnACAACQEJwAAAAkzsfxwDE9YpPHz89PT1jnc9MDlvnJ9IBlrk8PWOjP0wOW+eqnpxcs5MV5te59ZHrBMt+cHrCOCycAAAAJwQkAAEBCcAIAAJAQnAAAACQEJwAAAAnBCQAAQEJwAgAAkBCcAAAAJAQnAAAACcEJAABAQnACAACQEJwAAAAkBCcAAAAJwQkAAEBCcAIAAJAQnAAAACQEJwAAAAnBCQAAQEJwAgAAkBCcAAAAJAQnAAAACcEJAABAQnACAACQEJwAAAAkBCcAAAAJwQkAAEBCcAIAAJAQnAAAACQEJwAAAAnBCQAAQEJwAgAAkBCcAAAAJAQnAAAACcEJAABAQnACAACQEJwAAAAkBCcAAAAJwQkAAEBCcAIAAJAQnAAAACQEJwAAAAnBCQAAQEJwAgAAkBCcAAAAJAQnAAAACcEJAABAQnACAACQEJwAAAAkBCcAAAAJwQkAAEBCcAIAAJAQnAAAACQEJwAAAAnBCQAAQEJwAgAAkBCcAAAAJAQnAAAACcEJAABAQnACAACQEJwAAAAkBCcAAAAJwQkAAEBCcAIAAJAQnAAAACQEJwAAAAnBCQAAQEJwAgAAkBCcAAAAJAQnAAAACcEJAABAQnACAACQEJwAAAAkBCcAAAAJwQkAAEBCcAIAAJAQnAAAACQEJwAAAAnBCQAAQEJwAgAAkBCcAAAAJAQnAAAACcEJAABAQnACAACQEJwAAAAkBCcAAAAJwQkAAEBCcAIAAJAQnAAAACQEJwAAAAnBCQAAQEJwAgAAkBCcAAAAJM7Hn07H9IhVbpsesNDtt08vWOXa+a/TE1a5vDm9YKGfTg9Y5ufvnF6wzpvnf01PWOU30wOW+djx2PSEdVw4AQAASAhOAAAAEoITAACAhOAEAAAgITgBAABICE4AAAASghMAAICE4AQAACAhOAEAAEgITgAAABKCEwAAgITgBAAAICE4AQAASAhOAAAAEoITAACAhOAEAAAgITgBAABICE4AAAASghMAAICE4AQAACAhOAEAAEgITgAAABKCEwAAgITgBAAAICE4AQAASAhOAAAAEoITAACAhOAEAAAgITgBAABICE4AAAASghMAAICE4AQAACAhOAEAAEgITgAAABKCEwAAgITgBAAAICE4AQAASAhOAAAAEoITAACAhOAEAAAgITgBAABICE4AAAASghMAAICE4AQAACAhOAEAAEgITgAAABKCEwAAgITgBAAAICE4AQAASAhOAAAAEoITAACAhOAEAAAgITgBAABICE4AAAASghMAAICE4AQAACAhOAEAAEgITgAAABKCEwAAgITgBAAAICE4AQAASAhOAAAAEoITAACAhOAEAAAgITgBAABICE4AAAASghMAAICE4AQAACAhOAEAAEgITgAAABKCEwAAgITgBAAAICE4AQAASAhOAAAAEoITAACAhOAEAAAgITgBAABICE4AAAASghMAAICE4AQAACAhOAEAAEgITgAAABKCEwAAgITgBAAAICE4AQAASAhOAAAAEoITAACAhOAEAAAgITgBAABICE4AAAASghMAAIDE+XjH6Zgesco/pwcsdPG26QW7/PE/0wt2+dT0gH2uvTK9YJfL44fTE9a5dn54esIql4dP8Sv1xfP0gnVcOAEAAEgITgAAABKCEwAAgITgBAAAICE4AQAASAhOAAAAEoITAACAhOAEAAAgITgBAABICE4AAAASghMAAICE4AQAACAhOAEAAEgITgAAABKCEwAAgITgBAAAICE4AQAASAhOAAAAEoITAACAhOAEAAAgITgBAABICE4AAAASghMAAICE4AQAACAhOAEAAEgITgAAABKCEwAAgITgBAAAICE4AQAASAhOAAAAEoITAACAhOAEAAAgITgBAABICE4AAAASghMAAICE4AQAACAhOAEAAEgITgAAABKCEwAAgITgBAAAICE4AQAASAhOAAAAEoITAACAhOAEAAAgITgBAABICE4AAAASghMAAICE4AQAACAhOAEAAEgITgAAABKCEwAAgITgBAAAICE4AQAASAhOAAAAEoITAACAhOAEAAAgITgBAABICE4AAAASghMAAICE4AQAACAhOAEAAEgITgAAABKCEwAAgITgBAAAICE4AQAASAhOAAAAEoITAACAhOAEAAAgITgBAABICE4AAAASghMAAICE4AQAACAhOAEAAEgITgAAABKCEwAAgITgBAAAICE4AQAASAhOAAAAEoITAACAhOAEAAAgITgBAABICE4AAAASghMAAICE4AQAACAhOAEAAEgITgAAABKCEwAAgITgBAAAICE4AQAASAhOAAAAEoITAACAhOAEAAAgcfH8v6cn7PLAxSPTE9b54Pk70xNWeek90wuW8dvwyl0et6Yn7PLm3dML1rm8b3rBLnedz9MTVvn18YXpCev4VAEAACAhOAEAAEgITgAAABKCEwAAgITgBAAAICE4AQAASAhOAAAAEoITAACAhOAEAAAgITgBAABICE4AAAASghMAAICE4AQAACAhOAEAAEgITgAAABKCEwAAgITgBAAAICE4AQAASAhOAAAAEoITAACAhOAEAAAgITgBAABICE4AAAASghMAAICE4AQAACAhOAEAAEgITgAAABKCEwAAgITgBAAAICE4AQAASAhOAAAAEoITAACAhOAEAAAgITgBAABICE4AAAASghMAAICE4AQAACAhOAEAAEgITgAAABKCEwAAgITgBAAAICE4AQAASAhOAAAAEoITAACAhOAEAAAgITgBAABICE4AAAASghMAAICE4AQAACAhOAEAAEgITgAAABKCEwAAgITgBAAAICE4AQAASAhOAAAAEoITAACAhOAEAAAgITgBAABICE4AAAASghMAAICE4AQAACAhOAEAAEgITgAAABKCEwAAgITgBAAAICE4AQAASAhOAAAAEoITAACAhOAEAAAgITgBAABICE4AAAASghMAAICE4AQAACAhOAEAAEgITgAAABKCEwAAgITgBAAAICE4AQAASAhOAAAAEoITAACAhOAEAAAgITgBAABICE4AAAASghMAAICE4AQAACAhOAEAAEgITgAAABKCEwAAgITgBAAAICE4AQAASAhOAAAAEuf/nk7H9IhN3vrK9IJ9nn7f9IJdHro5vWCXF74yvWCfT/5yesEy93xmesE+739mesEqj/1+esEu16cHLOTCCQAAQEJwAgAAkBCcAAAAJAQnAAAACcEJAABAQnACAACQEJwAAAAkBCcAAAAJwQkAAEBCcAIAAJAQnAAAACQEJwAAAAnBCQAAQEJwAgAAkBCcAAAAJAQnAAAACcEJAABAQnACAACQEJwAAAAkBCcAAAAJwQkAAEBCcAIAAJAQnAAAACQEJwAAAAnBCQAAQEJwAgAAkBCcAAAAJAQnAAAACcEJAABAQnACAACQEJwAAAAkBCcAAAAJwQkAAEBCcAIAAJAQnAAAACQEJwAAAAnBCQAAQEJwAgAAkBCcAAAAJAQnAAAACcEJAABAQnACAACQEJwAAAAkBCcAAAAJwQkAAEBCcAIAAJAQnAAAACQEJwAAAAnBCQAAQEJwAgAAkBCcAAAAJAQnAAAACcEJAABAQnACAACQEJwAAAAkBCcAAAAJwQkAAEBCcAIAAJAQnAAAACQEJwAAAAnBCQAAQEJwAgAAkBCcAAAAJAQnAAAACcEJAABAQnACAACQEJwAAAAkBCcAAAAJwQkAAEBCcAIAAJAQnAAAACQEJwAAAAnBCQAAQEJwAgAAkBCcAAAAJAQnAAAACcEJAABAQnACAACQEJwAAAAkBCcAAAAJwQkAAEBCcAIAAJAQnAAAACQEJwAAAAnBCQAAQEJwAgAAkBCcAAAAJAQnAAAACcEJAABAQnACAACQEJwAAAAkzse3T8f0iFW+Pz1goT88OL1glTvPz01PWOW1J6cXLPSP6QHLXJ8esNDL0wOWefbG9IJdnnp9esE6LpwAAAAkBCcAAAAJwQkAAEBCcAIAAJAQnAAAACQEJwAAAAnBCQAAQEJwAgAAkBCcAAAAJAQnAAAACcEJAABAQnACAACQEJwAAAAkBCcAAAAJwQkAAEBCcAIAAJAQnAAAACQEJwAAAAnBCQAAQEJwAgAAkBCcAAAAJAQnAAAACcEJAABAQnACAACQEJwAAAAkBCcAAAAJwQkAAEBCcAIAAJAQnAAAACQEJwAAAAnBCQAAQEJwAgAAkBCcAAAAJAQnAAAACcEJAABAQnACAACQEJwAAAAkBCcAAAAJwQkAAEBCcAIAAJAQnAAAACQEJwAAAAnBCQAAQEJwAgAAkBCcAAAAJAQnAAAACcEJAABAQnACAACQEJwAAAAkBCcAAAAJwQkAAEBCcAIAAJAQnAAAACQEJwAAAAnBCQAAQEJwAgAAkBCcAAAAJAQnAAAACcEJAABAQnACAACQEJwAAAAkBCcAAAAJwQkAAEBCcAIAAJAQnAAAACQEJwAAAAnBCQAAQEJwAgAAkBCcAAAAJAQnAAAACcEJAABAQnACAACQEJwAAAAkBCcAAAAJwQkAAEBCcAIAAJAQnAAAACQEJwAAAAnBCQAAQEJwAgAAkBCcAAAAJAQnAAAACcEJAABAQnACAACQEJwAAAAkBCcAAAAJwQkAAEBCcAIAAJAQnAAAACQEJwAAAAnBCQAAQEJwAgAAkPgfJd5viqJ550UAAAAASUVORK5CYII="""
image_data = base64.b64decode(heatmap_base64)
image = Image.open(io.BytesIO(image_data))

st.subheader("üìä Player Heatmap")
st.image(image, use_container_width=True)

st.markdown("---")
st.caption("Developed by the ShinXpert Team üíô")